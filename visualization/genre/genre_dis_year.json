{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "autosize": {"type": "pad", "contains": "padding"},
  "background": "#11111100",
  "padding": 5,
  "data": [
    {
      "name": "selector002_store",
      "transform": [{"type": "collect", "sort": {"field": "_vgsid_"}}]
    },
    {
      "name": "data-ae91ad4dd7cc65cb96f0054985b0f4a9",
      "values": [
        {"Genre": "Action", "Count": 532, "Year": "2021"},
        {"Genre": "Adventure", "Count": 314, "Year": "2021"},
        {"Genre": "Animation", "Count": 158, "Year": "2021"},
        {"Genre": "Comedy", "Count": 565, "Year": "2021"},
        {"Genre": "Crime", "Count": 327, "Year": "2021"},
        {"Genre": "Documentary", "Count": 53, "Year": "2021"},
        {"Genre": "Drama", "Count": 785, "Year": "2021"},
        {"Genre": "Family", "Count": 170, "Year": "2021"},
        {"Genre": "Fantasy", "Count": 237, "Year": "2021"},
        {"Genre": "History", "Count": 65, "Year": "2021"},
        {"Genre": "Horror", "Count": 117, "Year": "2021"},
        {"Genre": "Music", "Count": 29, "Year": "2021"},
        {"Genre": "Mystery", "Count": 168, "Year": "2021"},
        {"Genre": "Romance", "Count": 216, "Year": "2021"},
        {"Genre": "Science Fiction", "Count": 207, "Year": "2021"},
        {"Genre": "TV Movie", "Count": 9, "Year": "2021"},
        {"Genre": "Thriller", "Count": 391, "Year": "2021"},
        {"Genre": "War", "Count": 50, "Year": "2021"},
        {"Genre": "Western", "Count": 13, "Year": "2021"},
        {"Genre": "Kids", "Count": 14, "Year": "2021"},
        {"Genre": "News", "Count": 0, "Year": "2021"},
        {"Genre": "Reality", "Count": 42, "Year": "2021"},
        {"Genre": "Soap", "Count": 9, "Year": "2021"},
        {"Genre": "Talk", "Count": 2, "Year": "2021"},
        {"Genre": "Politics", "Count": 12, "Year": "2021"},
        {"Genre": "Action", "Count": 859, "Year": "2022"},
        {"Genre": "Adventure", "Count": 499, "Year": "2022"},
        {"Genre": "Animation", "Count": 231, "Year": "2022"},
        {"Genre": "Comedy", "Count": 988, "Year": "2022"},
        {"Genre": "Crime", "Count": 552, "Year": "2022"},
        {"Genre": "Documentary", "Count": 142, "Year": "2022"},
        {"Genre": "Drama", "Count": 1365, "Year": "2022"},
        {"Genre": "Family", "Count": 270, "Year": "2022"},
        {"Genre": "Fantasy", "Count": 343, "Year": "2022"},
        {"Genre": "History", "Count": 97, "Year": "2022"},
        {"Genre": "Horror", "Count": 214, "Year": "2022"},
        {"Genre": "Music", "Count": 45, "Year": "2022"},
        {"Genre": "Mystery", "Count": 282, "Year": "2022"},
        {"Genre": "Romance", "Count": 393, "Year": "2022"},
        {"Genre": "Science Fiction", "Count": 313, "Year": "2022"},
        {"Genre": "TV Movie", "Count": 30, "Year": "2022"},
        {"Genre": "Thriller", "Count": 659, "Year": "2022"},
        {"Genre": "War", "Count": 83, "Year": "2022"},
        {"Genre": "Western", "Count": 23, "Year": "2022"},
        {"Genre": "Kids", "Count": 19, "Year": "2022"},
        {"Genre": "News", "Count": 0, "Year": "2022"},
        {"Genre": "Reality", "Count": 66, "Year": "2022"},
        {"Genre": "Soap", "Count": 16, "Year": "2022"},
        {"Genre": "Talk", "Count": 1, "Year": "2022"},
        {"Genre": "Politics", "Count": 18, "Year": "2022"},
        {"Genre": "Action", "Count": 733, "Year": "2023"},
        {"Genre": "Adventure", "Count": 419, "Year": "2023"},
        {"Genre": "Animation", "Count": 237, "Year": "2023"},
        {"Genre": "Comedy", "Count": 921, "Year": "2023"},
        {"Genre": "Crime", "Count": 492, "Year": "2023"},
        {"Genre": "Documentary", "Count": 127, "Year": "2023"},
        {"Genre": "Drama", "Count": 1216, "Year": "2023"},
        {"Genre": "Family", "Count": 251, "Year": "2023"},
        {"Genre": "Fantasy", "Count": 306, "Year": "2023"},
        {"Genre": "History", "Count": 75, "Year": "2023"},
        {"Genre": "Horror", "Count": 223, "Year": "2023"},
        {"Genre": "Music", "Count": 45, "Year": "2023"},
        {"Genre": "Mystery", "Count": 282, "Year": "2023"},
        {"Genre": "Romance", "Count": 332, "Year": "2023"},
        {"Genre": "Science Fiction", "Count": 292, "Year": "2023"},
        {"Genre": "TV Movie", "Count": 19, "Year": "2023"},
        {"Genre": "Thriller", "Count": 606, "Year": "2023"},
        {"Genre": "War", "Count": 60, "Year": "2023"},
        {"Genre": "Western", "Count": 13, "Year": "2023"},
        {"Genre": "Kids", "Count": 25, "Year": "2023"},
        {"Genre": "News", "Count": 0, "Year": "2023"},
        {"Genre": "Reality", "Count": 73, "Year": "2023"},
        {"Genre": "Soap", "Count": 9, "Year": "2023"},
        {"Genre": "Talk", "Count": 2, "Year": "2023"},
        {"Genre": "Politics", "Count": 18, "Year": "2023"}
      ]
    },
    {
      "name": "data_0",
      "source": "data-ae91ad4dd7cc65cb96f0054985b0f4a9",
      "transform": [{"type": "identifier", "as": "_vgsid_"}]
    },
    {
      "name": "column_domain",
      "source": "data_0",
      "transform": [{"type": "aggregate", "groupby": ["Year"]}]
    },
    {
      "name": "data_3",
      "source": "data_0",
      "transform": [
        {
          "type": "stack",
          "groupby": ["Genre", "Year"],
          "field": "Count",
          "sort": {"field": [], "order": []},
          "as": ["Count_start", "Count_end"],
          "offset": "zero"
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"Count\"]) && isFinite(+datum[\"Count\"])"
        }
      ]
    }
  ],
  "signals": [
    {"name": "child_width", "value": 200},
    {"name": "y_step", "value": 20},
    {
      "name": "child_height",
      "update": "bandspace(domain('y').length, 0.1, 0.05) * y_step"
    },
    {
      "name": "unit",
      "value": {},
      "on": [
        {"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}
      ]
    },
    {
      "name": "selector002",
      "update": "vlSelectionResolve(\"selector002_store\", \"union\", true, true)"
    }
  ],
  "layout": {
    "padding": 20,
    "offset": {"columnTitle": 10},
    "columns": {"signal": "length(data('column_domain'))"},
    "bounds": "full",
    "align": "all"
  },
  "marks": [
    {
      "name": "column-title",
      "type": "group",
      "role": "column-title",
      "title": {"text": "Year", "style": "guide-title", "offset": 10}
    },
    {
      "name": "row_header",
      "type": "group",
      "role": "row-header",
      "encode": {"update": {"height": {"signal": "child_height"}}},
      "axes": [
        {
          "scale": "y",
          "orient": "left",
          "grid": false,
          "labelAlign": "right",
          "zindex": 0
        }
      ]
    },
    {
      "name": "column_header",
      "type": "group",
      "role": "column-header",
      "from": {"data": "column_domain"},
      "sort": {"field": "datum[\"Year\"]", "order": "ascending"},
      "title": {
        "text": {
          "signal": "isValid(parent[\"Year\"]) ? parent[\"Year\"] : \"\"+parent[\"Year\"]"
        },
        "style": "guide-label",
        "frame": "group",
        "offset": 10
      },
      "encode": {"update": {"width": {"signal": "child_width"}}}
    },
    {
      "name": "column_footer",
      "type": "group",
      "role": "column-footer",
      "from": {"data": "column_domain"},
      "sort": {"field": "datum[\"Year\"]", "order": "ascending"},
      "encode": {"update": {"width": {"signal": "child_width"}}},
      "axes": [
        {
          "scale": "x",
          "orient": "bottom",
          "grid": false,
          "labelBaseline": "top",
          "labelFlush": true,
          "labelOverlap": true,
          "tickCount": {"signal": "ceil(child_width/40)"},
          "zindex": 0
        }
      ]
    },
    {
      "name": "cell",
      "type": "group",
      "style": "cell",
      "from": {
        "facet": {"name": "facet", "data": "data_0", "groupby": ["Year"]}
      },
      "sort": {"field": ["datum[\"Year\"]"], "order": ["ascending"]},
      "data": [
        {
          "source": "facet",
          "name": "data_0",
          "transform": [
            {
              "type": "stack",
              "groupby": ["Genre"],
              "field": "Count",
              "sort": {"field": [], "order": []},
              "as": ["Count_start", "Count_end"],
              "offset": "zero"
            },
            {
              "type": "filter",
              "expr": "isValid(datum[\"Count\"]) && isFinite(+datum[\"Count\"])"
            }
          ]
        }
      ],
      "encode": {
        "update": {
          "width": {"signal": "child_width"},
          "height": {"signal": "child_height"}
        }
      },
      "signals": [
        {
          "name": "facet",
          "value": {},
          "on": [
            {
              "events": [{"source": "scope", "type": "pointermove"}],
              "update": "isTuple(facet) ? facet : group(\"cell\").datum"
            }
          ]
        },
        {
          "name": "selector002_tuple",
          "on": [
            {
              "events": [
                {
                  "source": "scope",
                  "type": "mouseover",
                  "markname": "child_voronoi"
                }
              ],
              "update": "datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0 ? {unit: \"child\" + '__facet_column_' + (facet[\"Year\"]), _vgsid_: (item().isVoronoi ? datum.datum : datum)[\"_vgsid_\"]} : null",
              "force": true
            },
            {
              "events": [{"source": "view", "type": "dblclick"}],
              "update": "null"
            }
          ]
        },
        {
          "name": "selector002_modify",
          "on": [
            {
              "events": {"signal": "selector002_tuple"},
              "update": "modify(\"selector002_store\", selector002_tuple, true)"
            }
          ]
        }
      ],
      "marks": [
        {
          "name": "child_marks",
          "type": "rect",
          "style": ["bar"],
          "interactive": true,
          "from": {"data": "data_0"},
          "encode": {
            "update": {
              "fill": [
                {
                  "test": "!length(data(\"selector002_store\")) || vlSelectionIdTest(\"selector002_store\", datum)",
                  "value": "#E50914"
                },
                {"value": "darkgray"}
              ],
              "tooltip": {
                "signal": "{\"Genre\": isValid(datum[\"Genre\"]) ? datum[\"Genre\"] : \"\"+datum[\"Genre\"], \"Count\": format(datum[\"Count\"], \"\")}"
              },
              "ariaRoleDescription": {"value": "bar"},
              "description": {
                "signal": "\"Count: \" + (format(datum[\"Count\"], \"\")) + \"; Genre: \" + (isValid(datum[\"Genre\"]) ? datum[\"Genre\"] : \"\"+datum[\"Genre\"])"
              },
              "x": {"scale": "x", "field": "Count_end"},
              "x2": {"scale": "x", "field": "Count_start"},
              "y": {"scale": "y", "field": "Genre"},
              "height": {"signal": "max(0.25, bandwidth('y'))"}
            }
          }
        },
        {
          "name": "child_voronoi",
          "type": "path",
          "interactive": true,
          "from": {"data": "child_marks"},
          "encode": {
            "update": {
              "fill": {"value": "transparent"},
              "strokeWidth": {"value": 0.35},
              "stroke": {"value": "transparent"},
              "isVoronoi": {"value": true},
              "tooltip": {
                "signal": "{\"Genre\": isValid(datum.datum[\"Genre\"]) ? datum.datum[\"Genre\"] : \"\"+datum.datum[\"Genre\"], \"Count\": format(datum.datum[\"Count\"], \"\")}"
              }
            }
          },
          "transform": [
            {
              "type": "voronoi",
              "x": {"expr": "datum.datum.x || 0"},
              "y": {"expr": "datum.datum.y || 0"},
              "size": [{"signal": "child_width"}, {"signal": "child_height"}]
            }
          ]
        }
      ],
      "axes": [
        {
          "scale": "x",
          "orient": "bottom",
          "gridScale": "y",
          "grid": true,
          "tickCount": {"signal": "ceil(child_width/40)"},
          "domain": false,
          "labels": false,
          "aria": false,
          "maxExtent": 0,
          "minExtent": 0,
          "ticks": false,
          "zindex": 0
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "x",
      "type": "linear",
      "domain": {"data": "data_3", "fields": ["Count_start", "Count_end"]},
      "range": [0, {"signal": "child_width"}],
      "nice": true,
      "zero": true
    },
    {
      "name": "y",
      "type": "band",
      "domain": {
        "data": "data_0",
        "field": "Genre",
        "sort": {"op": "sum", "field": "Count", "order": "descending"}
      },
      "range": {"step": {"signal": "y_step"}},
      "paddingInner": 0.1,
      "paddingOuter": 0.05
    }
  ],
  "config": {
    "range": {
      "category": [
        "#f0e442",
        "#cc79a7",
        "#79c9cd",
        "#D55e00",
        "#780909",
        "#0b0000",
        "#dedede",
        "#43465e"
      ],
      "diverging": [
        "#ff7272",
        "#e80000",
        "#c10000",
        "#973333",
        "#640000",
        "#000000"
      ]
    },
    "axisX": {
      "labelColor": "#F5F5F1",
      "titleColor": "#ededed",
      "domain": true,
      "domainColor": "#43465e",
      "domainWidth": 0.5,
      "grid": true,
      "gridColor": "#3c3c3c",
      "labelFont": "Lato",
      "labelFontSize": 12,
      "labelAngle": 0,
      "tickColor": "#43465e",
      "tickSize": 5,
      "titleFont": "Lato",
      "titleFontSize": 12,
      "titlePadding": 10,
      "title": "X Axis Title (units)"
    },
    "axisY": {
      "domain": false,
      "domainColor": "#e4e4e4",
      "grid": false,
      "gridColor": "#43465e",
      "gridWidth": 1,
      "labelFont": "Lato",
      "labelFontSize": 12,
      "labelColor": "#F5F5F1",
      "labelPadding": 10,
      "labelAngle": 0,
      "ticks": false,
      "titleFont": "Lato",
      "titleFontSize": 12,
      "titlePadding": 10,
      "title": "Y Axis Title (units)",
      "titleAngle": 0,
      "titleY": -10,
      "titleX": 18
    },
    "legend": {
      "labelColor": "#dadada",
      "labelFont": "Lato",
      "labelFontSize": 12,
      "titleColor": "#dadada",
      "titleFont": "Lato",
      "titleFontSize": 12
    },
    "style": {
      "guide-label": {"fill": "#fff"},
      "guide-title": {"fill": "#fff"},
      "cell": {"fill": "rgba(0, 0, 0, 0)", "stroke": "transparent"},
      "group-title": {"fontSize": 18, "font": "Lato", "fill": "#ffffff"}
    }
  }
}